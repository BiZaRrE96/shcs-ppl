<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard Dokter - Smart Health Center Service</title>
  <link rel="stylesheet" href="../css/style.css">
  <script>
    // Proteksi akses - hanya untuk role dokter
    window.addEventListener('DOMContentLoaded', function() {
      const userRole = sessionStorage.getItem('userRole');
      const isLoggedIn = sessionStorage.getItem('isLoggedIn');
      
      // Jika belum login, set default sebagai dokter (untuk kemudahan demo)
      if (!isLoggedIn) {
        sessionStorage.setItem('userRole', 'dokter');
        sessionStorage.setItem('isLoggedIn', 'true');
        sessionStorage.setItem('username', 'Demo Dokter');
      }
      // Jika login sebagai role lain, redirect
      else if (userRole !== 'dokter') {
        alert('âš ï¸ Anda login sebagai ' + userRole + '\n\nAkan diarahkan ke portal yang sesuai.');
        if (userRole === 'pasien') window.location.href = '../pasien/dashboard.html';
        else if (userRole === 'tenaga_medis') window.location.href = '../staf/dashboard.html';
        else if (userRole === 'admin') window.location.href = '../admin/dashboard.html';
      }
    });
  </script>
  <style>
    .doctor-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: linear-gradient(135deg, #00796b, #004d40);
      color: #fff;
      padding: 1.5rem;
      border-radius: 8px;
      margin-bottom: 2rem;
    }
    .doctor-info {
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    .doctor-avatar {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background: #fff;
      color: #00796b;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
      font-weight: bold;
      border: 3px solid rgba(255,255,255,0.3);
    }
    .schedule-badge {
      display: inline-block;
      padding: 0.25rem 0.75rem;
      border-radius: 20px;
      font-size: 0.85rem;
      margin-right: 0.5rem;
      margin-bottom: 0.5rem;
    }
    .patient-card {
      background: #fff;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      padding: 1rem;
      margin-bottom: 1rem;
      transition: all 0.3s ease;
    }
    .patient-card:hover {
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      transform: translateY(-2px);
    }
    .patient-card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.75rem;
    }
    .queue-number {
      background: #00796b;
      color: #fff;
      font-size: 1.25rem;
      font-weight: bold;
      padding: 0.5rem 1rem;
      border-radius: 8px;
    }
  </style>
</head>
<body>
  <header>
    <div class="header-container">
      <div class="logo" style="flex-direction: column; align-items: flex-start; gap: 0.25rem;">
        <img src="../img/Smarthealth-Logo.png" alt="Smart Health Logo" style="height: 45px;">
        <p style="font-size: 0.75rem; margin: 0; color: #5f7a95;">Layanan Digital Puskesmas - Portal Dokter</p>
      </div>
      <nav>
        <div class="nav-container">
          <div class="nav-breadcrumb">
            <span class="current-page">ğŸ  Dashboard</span>
          </div>
          <div class="nav-actions">
            <div class="nav-dropdown">
              <button class="dropdown-toggle">ğŸ“‹ Menu â–¼</button>
              <div class="dropdown-menu">
                <a href="daftar-pasien.html">ğŸ‘¥ Daftar Pasien</a>
                <a href="rekam-medis.html">ğŸ“ Rekam Medis</a>
              </div>
            </div>
            <div class="nav-dropdown">
              <button class="dropdown-toggle">ğŸ‘¨â€âš•ï¸ Akun â–¼</button>
              <div class="dropdown-menu">
                <a href="../logout.html" style="color: #d32f2f; font-weight: 700;">ğŸšª Logout</a>
              </div>
            </div>
          </div>
        </div>
      </nav>
    </div>
  </header>

  <main>
    <!-- Info Role -->
    <div style="background: #e8f5e9; padding: 0.75rem 1rem; border-left: 4px solid #388e3c; border-radius: 4px; margin-bottom: 1.5rem;">
      <strong>ğŸ©º Mode: DOKTER</strong> - Anda dapat memeriksa pasien, input rekam medis, membuat resep dan surat keterangan
    </div>
    
    <!-- Doctor Header Card -->
    <div class="doctor-header">
      <div class="doctor-info">
        <div class="doctor-avatar">AW</div>
        <div>
          <h2 style="margin: 0 0 0.5rem 0;">dr. Ahmad Wijaya, Sp.A</h2>
          <p style="margin: 0; opacity: 0.9;">ğŸ‘¶ Spesialis Anak | ğŸ¥ Poli Anak | SIP: 123/456/789/2024</p>
          <div style="margin-top: 0.5rem;">
            <span class="schedule-badge" style="background: rgba(255,255,255,0.2);">ğŸ“… Senin - Jumat</span>
            <span class="schedule-badge" style="background: rgba(255,255,255,0.2);">ğŸ• 08:00 - 14:00</span>
          </div>
        </div>
      </div>
      <div style="text-align: right;">
        <div style="font-size: 2.5rem; font-weight: bold; margin-bottom: 0.5rem;">23</div>
        <div style="opacity: 0.9;">Pasien Hari Ini</div>
      </div>
    </div>

    <!-- Quick Stats -->
    <div class="stats-grid">
      <div class="stat-box" style="background: linear-gradient(135deg, #1e88e5, #1565c0);">
        <div class="stat-number">23</div>
        <div class="stat-label">Total Pasien Hari Ini</div>
      </div>
      <div class="stat-box" style="background: linear-gradient(135deg, #43a047, #2e7d32);">
        <div class="stat-number">12</div>
        <div class="stat-label">Sudah Diperiksa</div>
      </div>
      <div class="stat-box" style="background: linear-gradient(135deg, #fb8c00, #ef6c00);">
        <div class="stat-number">5</div>
        <div class="stat-label">Sedang Antrean</div>
      </div>
      <div class="stat-box" style="background: linear-gradient(135deg, #e53935, #c62828);">
        <div class="stat-number">6</div>
        <div class="stat-label">Belum Dipanggil</div>
      </div>
    </div>

    <div class="card-grid">
      <!-- Left Column - Active Queue -->
      <div class="card" style="grid-column: span 2;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
          <h3>ğŸ“‹ Antrean Aktif</h3>
          <button class="btn btn-primary" onclick="callNext()">ğŸ“¢ Panggil Pasien Berikutnya</button>
        </div>

        <!-- Current Patient -->
        <div style="background: linear-gradient(135deg, #e8f5e9, #c8e6c9); border: 2px solid #43a047; border-radius: 8px; padding: 1.5rem; margin-bottom: 1.5rem;">
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <div>
              <div style="color: #2e7d32; font-size: 0.9rem; margin-bottom: 0.5rem;">ğŸ”” SEDANG DILAYANI</div>
              <h3 style="margin: 0 0 0.5rem 0;">Pasien A-05: Siti Nurhaliza</h3>
              <p style="margin: 0; color: #666;">ğŸ‘¶ Perempuan, 4 tahun | RM-2025-0234</p>
              <p style="margin: 0.5rem 0 0 0; color: #666;">â° Waktu Tunggu: 5 menit | ğŸ“ Keluhan: Demam dan batuk sejak 2 hari</p>
            </div>
            <button class="btn btn-success" onclick="startExamination('A-05')">ğŸ©º Mulai Pemeriksaan</button>
          </div>
        </div>

        <!-- Next in Queue -->
        <h4 style="margin-bottom: 1rem; color: #666;">Antrean Berikutnya:</h4>
        
        <div class="patient-card">
          <div class="patient-card-header">
            <div>
              <h4 style="margin: 0 0 0.5rem 0;">Pasien A-06: Budi Santoso</h4>
              <p style="margin: 0; color: #666;">ğŸ‘¦ Laki-laki, 7 tahun | RM-2025-0189</p>
            </div>
            <div class="queue-number">A-06</div>
          </div>
          <p style="margin: 0; color: #666;">ğŸ“ Keluhan: Sakit perut dan diare</p>
          <p style="margin: 0.5rem 0 0 0; color: #999; font-size: 0.9rem;">â° Terdaftar: 09:30 WIB</p>
        </div>

        <div class="patient-card">
          <div class="patient-card-header">
            <div>
              <h4 style="margin: 0 0 0.5rem 0;">Pasien A-07: Rina Wati</h4>
              <p style="margin: 0; color: #666;">ğŸ‘§ Perempuan, 5 tahun | RM-2025-0312</p>
            </div>
            <div class="queue-number">A-07</div>
          </div>
          <p style="margin: 0; color: #666;">ğŸ“ Keluhan: Ruam kulit dan gatal</p>
          <p style="margin: 0.5rem 0 0 0; color: #999; font-size: 0.9rem;">â° Terdaftar: 09:45 WIB</p>
        </div>

        <div class="patient-card">
          <div class="patient-card-header">
            <div>
              <h4 style="margin: 0 0 0.5rem 0;">Pasien A-08: Farhan Ahmad</h4>
              <p style="margin: 0; color: #666;">ğŸ‘¦ Laki-laki, 3 tahun | RM-2025-0445</p>
            </div>
            <div class="queue-number">A-08</div>
          </div>
          <p style="margin: 0; color: #666;">ğŸ“ Keluhan: Batuk pilek, susah makan</p>
          <p style="margin: 0.5rem 0 0 0; color: #999; font-size: 0.9rem;">â° Terdaftar: 10:00 WIB</p>
        </div>

        <button class="btn btn-secondary" onclick="viewAllQueue()" style="width: 100%; margin-top: 1rem;">ğŸ“‹ Lihat Semua Antrean (6 pasien tersisa)</button>
      </div>

      <!-- Right Column - Additional Info -->
      <div>
        <!-- Today's Statistics -->
        <div class="card">
          <h3>ğŸ“Š Statistik Hari Ini</h3>
          <div style="padding: 1rem 0;">
            <div style="display: flex; justify-content: space-between; padding: 0.75rem 0; border-bottom: 1px solid #f0f0f0;">
              <span>â° Waktu Pelayanan Rata-rata</span>
              <strong>12 menit</strong>
            </div>
            <div style="display: flex; justify-content: space-between; padding: 0.75rem 0; border-bottom: 1px solid #f0f0f0;">
              <span>âœ… Pasien Selesai</span>
              <strong>12 / 23</strong>
            </div>
            <div style="display: flex; justify-content: space-between; padding: 0.75rem 0; border-bottom: 1px solid #f0f0f0;">
              <span>ğŸ“ Resep Diterbitkan</span>
              <strong>10</strong>
            </div>
            <div style="display: flex; justify-content: space-between; padding: 0.75rem 0; border-bottom: 1px solid #f0f0f0;">
              <span>ğŸ”¬ Rujukan Lab</span>
              <strong>3</strong>
            </div>
            <div style="display: flex; justify-content: space-between; padding: 0.75rem 0;">
              <span>ğŸ¥ Rujukan RS</span>
              <strong>1</strong>
            </div>
          </div>
        </div>

        <!-- Quick Actions -->
        <div class="card">
          <h3>âš¡ Aksi Cepat</h3>
          <div style="display: grid; gap: 0.75rem;">
            <button class="btn btn-primary" onclick="location.href='daftar-pasien.html'">ğŸ‘¥ Lihat Semua Pasien</button>
            <button class="btn btn-primary" onclick="location.href='rekam-medis.html'">ğŸ“‹ Cari Rekam Medis</button>
            <button class="btn btn-secondary" onclick="viewSchedule()">ğŸ“… Jadwal Praktik Saya</button>
            <button class="btn btn-secondary" onclick="viewStatistics()">ğŸ“Š Statistik Bulanan</button>
          </div>
        </div>

        <!-- Recent Notifications -->
        <div class="card">
          <h3>ğŸ”” Notifikasi</h3>
          <div style="max-height: 300px; overflow-y: auto;">
            <div style="padding: 0.75rem; background: #e3f2fd; border-left: 3px solid #1976d2; margin-bottom: 0.75rem; border-radius: 4px;">
              <div style="font-size: 0.85rem; color: #999; margin-bottom: 0.25rem;">10:15 WIB</div>
              <div>ğŸ“ Hasil lab untuk pasien RM-2025-0189 sudah tersedia</div>
            </div>
            <div style="padding: 0.75rem; background: #fff3cd; border-left: 3px solid #f57c00; margin-bottom: 0.75rem; border-radius: 4px;">
              <div style="font-size: 0.85rem; color: #999; margin-bottom: 0.25rem;">09:45 WIB</div>
              <div>âš ï¸ Pasien A-04 memiliki riwayat alergi obat (Amoxicillin)</div>
            </div>
            <div style="padding: 0.75rem; background: #e8f5e9; border-left: 3px solid #388e3c; margin-bottom: 0.75rem; border-radius: 4px;">
              <div style="font-size: 0.85rem; color: #999; margin-bottom: 0.25rem;">08:30 WIB</div>
              <div>âœ… Jadwal praktik hari ini: 23 pasien terdaftar</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Recent Patients -->
    <div class="card">
      <h3>ğŸ‘¥ Pasien Terakhir Diperiksa</h3>
      <div class="table-container">
        <table>
          <thead>
            <tr>
              <th>No. Antrean</th>
              <th>Nama Pasien</th>
              <th>Umur/JK</th>
              <th>Diagnosis</th>
              <th>Waktu Selesai</th>
              <th>Aksi</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><span class="badge badge-success">A-04</span></td>
              <td>Muhammad Rizki</td>
              <td>6 tahun / L</td>
              <td>ISPA (J06.9)</td>
              <td>10:10 WIB</td>
              <td><button class="btn btn-secondary btn-sm" onclick="viewRecord('RM-2025-0178')">ğŸ“„ Lihat Rekam Medis</button></td>
            </tr>
            <tr>
              <td><span class="badge badge-success">A-03</span></td>
              <td>Ayu Lestari</td>
              <td>5 tahun / P</td>
              <td>Gastroenteritis (A09)</td>
              <td>09:55 WIB</td>
              <td><button class="btn btn-secondary btn-sm" onclick="viewRecord('RM-2025-0201')">ğŸ“„ Lihat Rekam Medis</button></td>
            </tr>
            <tr>
              <td><span class="badge badge-success">A-02</span></td>
              <td>Dewi Kartika</td>
              <td>8 tahun / P</td>
              <td>Dermatitis Atopik (L20.9)</td>
              <td>09:40 WIB</td>
              <td><button class="btn btn-secondary btn-sm" onclick="viewRecord('RM-2025-0267')">ğŸ“„ Lihat Rekam Medis</button></td>
            </tr>
            <tr>
              <td><span class="badge badge-success">A-01</span></td>
              <td>Andi Firmansyah</td>
              <td>4 tahun / L</td>
              <td>Faringitis Akut (J02.9)</td>
              <td>09:20 WIB</td>
              <td><button class="btn btn-secondary btn-sm" onclick="viewRecord('RM-2025-0123')">ğŸ“„ Lihat Rekam Medis</button></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </main>

  <footer>
    <p>&copy; 2025 Smart Health Center Service. All Rights Reserved.</p>
  </footer>

  <script src="../js/header-common.js"></script>
  <script>
    function callNext() {
      if (confirm('ğŸ“¢ Panggil pasien berikutnya (A-06)?')) {
        alert('âœ… Pasien A-06 - Budi Santoso dipanggil!\n\nNotifikasi telah dikirim ke layar antrean dan aplikasi pasien.');
        location.reload();
      }
    }

    function startExamination(queueNumber) {
      if (confirm('ğŸ©º Mulai pemeriksaan untuk pasien ' + queueNumber + '?')) {
        location.href = 'rekam-medis.html?patient=' + queueNumber;
      }
    }

    function viewAllQueue() {
      location.href = 'daftar-pasien.html';
    }

    function viewRecord(rmNumber) {
      location.href = 'rekam-medis.html?rm=' + rmNumber;
    }

    function viewSchedule() {
      alert('ğŸ“… Jadwal Praktik dr. Ahmad Wijaya, Sp.A\n\nSenin - Jumat: 08:00 - 14:00\nSabtu: 08:00 - 12:00\nMinggu: Libur\n\nPoli Anak - Ruang 3');
    }

    function viewStatistics() {
      alert('ğŸ“Š Statistik Bulan November 2025\n\nTotal Pasien: 487 pasien\nRata-rata per hari: 23 pasien\nWaktu tunggu rata-rata: 15 menit\nTingkat kepuasan: 4.8/5.0');
    }

    // Auto-refresh every 30 seconds
    setInterval(function() {
      console.log('Checking for queue updates...');
    }, 30000);
  </script>
</body>
</html>
