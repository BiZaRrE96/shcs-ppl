<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard Tenaga Medis - Smart Health Center Service</title>
  <link rel="stylesheet" href="../css/style.css">
  <script>
    // Proteksi akses - hanya untuk role tenaga_medis
    window.addEventListener('DOMContentLoaded', function() {
      const userRole = sessionStorage.getItem('userRole');
      const isLoggedIn = sessionStorage.getItem('isLoggedIn');
      
      // Jika belum login, set default sebagai tenaga_medis (untuk kemudahan demo)
      if (!isLoggedIn) {
        sessionStorage.setItem('userRole', 'tenaga_medis');
        sessionStorage.setItem('isLoggedIn', 'true');
        sessionStorage.setItem('username', 'Demo Tenaga Medis');
      }
      // Jika login sebagai role lain, redirect
      else if (userRole !== 'tenaga_medis') {
        alert('âš ï¸ Anda login sebagai ' + userRole + '\n\nAkan diarahkan ke portal yang sesuai.');
        if (userRole === 'pasien') window.location.href = '../pasien/dashboard.html';
        else if (userRole === 'dokter') window.location.href = '../dokter/dashboard.html';
        else if (userRole === 'admin') window.location.href = '../admin/dashboard.html';
      }
    });
  </script>
</head>
<body>
  <header>
    <div class="header-container">
      <div class="logo" style="flex-direction: column; align-items: flex-start; gap: 0.25rem;">
        <img src="../img/Smarthealth-Logo.png" alt="Smart Health Logo" style="height: 45px;">
        <p style="font-size: 0.75rem; margin: 0; color: #5f7a95;">Layanan Digital Puskesmas - Portal Staf</p>
      </div>
      <nav>
        <div class="nav-container">
          <div class="nav-breadcrumb">
            <span class="current-page">ğŸ  Dashboard</span>
          </div>
          <div class="nav-actions">
            <div class="nav-dropdown">
              <button class="dropdown-toggle">ğŸ“‹ Menu â–¼</button>
              <div class="dropdown-menu">
                <a href="daftar-antrean.html">ğŸ“‹ Daftar Antrean</a>
                <a href="kelola-antrean.html">âš™ï¸ Kelola Antrean</a>
                <a href="validasi-surat.html">âœ… Validasi Surat</a>
                <a href="hasil-pemeriksaan.html">ğŸ“ Hasil Pemeriksaan</a>
              </div>
            </div>
            <div class="nav-dropdown">
              <button class="dropdown-toggle">ğŸ‘¨â€âš•ï¸ Akun â–¼</button>
              <div class="dropdown-menu">
                <a href="../logout.html" style="color: #d32f2f; font-weight: 700;">ğŸšª Logout</a>
              </div>
            </div>
          </div>
        </div>
      </nav>
    </div>
  </header>

  <main>
    <div class="page-header">
      <h2>Dashboard Tenaga Medis</h2>
      <p>Selamat datang, Perawat Sri Wahyuni - Poli Umum</p>
      <div style="background: #f3e5f5; padding: 0.75rem 1rem; border-left: 4px solid #7b1fa2; border-radius: 4px; margin-top: 1rem;">
        <strong>ğŸ‘¨â€âš•ï¸ Mode: TENAGA MEDIS</strong> - Anda dapat mengelola antrean, validasi surat, dan input hasil pemeriksaan untuk SEMUA pasien
      </div>
    </div>

    <!-- Quick Stats -->
    <div class="stats-grid">
      <div class="stat-card">
        <h3>45</h3>
        <p>Total Antrean Hari Ini</p>
      </div>
      <div class="stat-card warning">
        <h3>12</h3>
        <p>Sedang Menunggu</p>
      </div>
      <div class="stat-card info">
        <h3>1</h3>
        <p>Sedang Dilayani</p>
      </div>
      <div class="stat-card success">
        <h3>32</h3>
        <p>Selesai Dilayani</p>
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="card">
      <h3>âš¡ Aksi Cepat</h3>
      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin-top: 1rem;">
        <a href="daftar-antrean.html" class="btn btn-primary" style="text-align: center; padding: 1.5rem;">
          ğŸ“‹ Lihat Daftar Antrean
        </a>
        <a href="kelola-antrean.html" class="btn btn-primary" style="text-align: center; padding: 1.5rem;">
          âš™ï¸ Kelola Antrean
        </a>
        <a href="validasi-surat.html" class="btn btn-primary" style="text-align: center; padding: 1.5rem;">
          âœ… Validasi Surat (2 Pending)
        </a>
        <a href="hasil-pemeriksaan.html" class="btn btn-primary" style="text-align: center; padding: 1.5rem;">
          ğŸ“ Catat Hasil Pemeriksaan
        </a>
      </div>
    </div>

    <div class="card-grid">
      <!-- Antrean Saat Ini -->
      <div class="card">
        <h3>ğŸ‘¥ Antrean Saat Ini - Poli Umum</h3>
        <div style="background: #e3f2fd; padding: 1.5rem; border-radius: 10px; margin: 1rem 0; text-align: center;">
          <p style="color: #1565c0; margin-bottom: 0.5rem;">Sedang Dilayani</p>
          <p style="font-size: 3rem; font-weight: bold; color: #00796b; margin: 0;">A-009</p>
          <p style="color: #666; margin-top: 0.5rem;">Budi Santoso</p>
          <button class="btn btn-success" style="margin-top: 1rem;" onclick="selesaiPelayanan('A-009')">
            âœ… Selesai Pelayanan
          </button>
        </div>
        
        <p style="font-weight: 600; margin: 1.5rem 0 0.5rem 0;">Antrean Berikutnya:</p>
        <div style="display: flex; flex-direction: column; gap: 0.5rem;">
          <div style="padding: 0.75rem; background: #fff3cd; border-radius: 5px; display: flex; justify-content: space-between; align-items: center;">
            <div>
              <strong>A-010</strong> - Siti Aminah
            </div>
            <button class="btn btn-primary" style="padding: 0.5rem 1rem;" onclick="panggilPasien('A-010')">
              ğŸ“¢ Panggil
            </button>
          </div>
          <div style="padding: 0.75rem; background: #f5f5f5; border-radius: 5px;">
            <strong>A-011</strong> - Dewi Lestari
          </div>
          <div style="padding: 0.75rem; background: #f5f5f5; border-radius: 5px;">
            <strong>A-012</strong> - Ahmad Ridwan
          </div>
        </div>
      </div>

      <!-- Tugas Pending -->
      <div class="card">
        <h3>ğŸ“Œ Tugas Pending</h3>
        <ul class="notification-list">
          <li class="notification-item">
            <div>
              <strong>Validasi Surat Permohonan</strong>
              <p style="font-size: 0.9rem; color: #666; margin-top: 0.25rem;">
                2 surat menunggu validasi
              </p>
            </div>
            <a href="validasi-surat.html" class="btn btn-primary" style="padding: 0.5rem 1rem;">Lihat</a>
          </li>
          <li class="notification-item">
            <div>
              <strong>Pencatatan Hasil Pemeriksaan</strong>
              <p style="font-size: 0.9rem; color: #666; margin-top: 0.25rem;">
                1 hasil pemeriksaan belum dicatat
              </p>
            </div>
            <a href="hasil-pemeriksaan.html" class="btn btn-primary" style="padding: 0.5rem 1rem;">Catat</a>
          </li>
          <li class="notification-item">
            <div>
              <strong>Update Stok Obat</strong>
              <p style="font-size: 0.9rem; color: #666; margin-top: 0.25rem;">
                Beberapa obat hampir habis
              </p>
            </div>
            <button class="btn btn-secondary" style="padding: 0.5rem 1rem;">Lihat</button>
          </li>
        </ul>
      </div>
    </div>

    <!-- Statistik Harian -->
    <div class="card">
      <h3>ğŸ“Š Statistik Pelayanan Hari Ini</h3>
      <table>
        <thead>
          <tr>
            <th>Waktu</th>
            <th>Total Pasien</th>
            <th>Selesai</th>
            <th>Menunggu</th>
            <th>Rata-rata Waktu Layanan</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>08:00 - 10:00</td>
            <td>15</td>
            <td>15</td>
            <td>0</td>
            <td>8 menit</td>
          </tr>
          <tr>
            <td>10:00 - 12:00</td>
            <td>18</td>
            <td>17</td>
            <td>1</td>
            <td>10 menit</td>
          </tr>
          <tr style="background: #e8f5e9;">
            <td><strong>12:00 - 14:00 (Saat Ini)</strong></td>
            <td>12</td>
            <td>0</td>
            <td>12</td>
            <td>-</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Riwayat Pasien Hari Ini -->
    <div class="card">
      <h3>ğŸ“‹ Riwayat Pasien Dilayani Hari Ini</h3>
      <table>
        <thead>
          <tr>
            <th>No. Antrean</th>
            <th>Nama Pasien</th>
            <th>Waktu Masuk</th>
            <th>Waktu Selesai</th>
            <th>Diagnosis</th>
            <th>Tindakan</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>A-008</td>
            <td>Ratna Sari</td>
            <td>09:45</td>
            <td>09:58</td>
            <td>Hipertensi (Kontrol)</td>
            <td>Pemeriksaan TD, Resep Obat</td>
          </tr>
          <tr>
            <td>A-007</td>
            <td>Hasan Basri</td>
            <td>09:30</td>
            <td>09:42</td>
            <td>Diabetes (Kontrol)</td>
            <td>Cek Gula Darah, Konsultasi</td>
          </tr>
          <tr>
            <td>A-006</td>
            <td>Anton Wijaya</td>
            <td>09:15</td>
            <td>09:28</td>
            <td>ISPA</td>
            <td>Pemeriksaan Fisik, Resep Obat</td>
          </tr>
          <tr>
            <td>A-005</td>
            <td>Nur Azizah</td>
            <td>09:00</td>
            <td>09:12</td>
            <td>Demam</td>
            <td>Cek Suhu, Resep Obat</td>
          </tr>
          <tr>
            <td>A-004</td>
            <td>Dewi Lestari</td>
            <td>08:45</td>
            <td>08:55</td>
            <td>Batuk & Pilek</td>
            <td>Resep Obat</td>
          </tr>
        </tbody>
      </table>
      <button class="btn btn-secondary" style="margin-top: 1rem;">Lihat Semua Riwayat</button>
    </div>

    <!-- Shift & Jadwal -->
    <div class="card-grid">
      <div class="card" style="background: #e8f5e9; border-left: 4px solid #388e3c;">
        <h3 style="color: #2e7d32;">â° Shift Hari Ini</h3>
        <div style="margin-top: 1rem;">
          <p style="line-height: 2; color: #666;">
            <strong>Nama:</strong> Perawat Sri Wahyuni<br>
            <strong>Shift:</strong> Pagi (08:00 - 16:00)<br>
            <strong>Poli:</strong> Poli Umum<br>
            <strong>Dokter:</strong> dr. Ahmad Fauzi<br>
            <strong>Status:</strong> <span class="badge badge-success">Aktif</span>
          </p>
        </div>
      </div>

      <div class="card" style="background: #e3f2fd; border-left: 4px solid #1976d2;">
        <h3 style="color: #1565c0;">ğŸ“… Jadwal Minggu Ini</h3>
        <div style="margin-top: 1rem;">
          <div style="padding: 0.5rem; margin-bottom: 0.5rem; background: #fff; border-radius: 5px;">
            <strong>Senin - Jumat</strong><br>
            <span style="color: #666;">Shift Pagi: 08:00 - 16:00</span>
          </div>
          <div style="padding: 0.5rem; background: #fff; border-radius: 5px;">
            <strong>Sabtu</strong><br>
            <span style="color: #666;">Shift Pagi: 08:00 - 13:00</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Informasi Penting -->
    <div class="card" style="background: #fff3cd; border-left: 4px solid #f57c00;">
      <h3 style="color: #e65100;">ğŸ“¢ Informasi Penting</h3>
      <ul style="line-height: 2; color: #666; margin-top: 1rem;">
        <li>Rapat koordinasi tenaga medis pada <strong>Kamis, 28 November 2025 pukul 14:00 WIB</strong></li>
        <li>Pemeliharaan sistem pada <strong>30 November 2025, 22:00-24:00 WIB</strong></li>
        <li>Stok vaksin influenza tersedia terbatas, prioritaskan untuk lansia</li>
        <li>Protokol kesehatan tetap diterapkan: wajib masker dan hand sanitizer</li>
      </ul>
    </div>
  </main>

  <footer>
    <p>&copy; 2025 Smart Health Center Service. All Rights Reserved.</p>
  </footer>

  <script>
    function panggilPasien(nomorAntrean) {
      if (confirm('Panggil pasien ' + nomorAntrean + '?\n\nSistem akan mengirim notifikasi ke pasien.')) {
        alert('ğŸ“¢ Pasien ' + nomorAntrean + ' dipanggil!\n\nNotifikasi telah dikirim ke pasien.');
        location.reload();
      }
    }

    function selesaiPelayanan(nomorAntrean) {
      if (confirm('Tandai pelayanan ' + nomorAntrean + ' selesai?\n\nPastikan hasil pemeriksaan sudah dicatat.')) {
        alert('âœ… Pelayanan selesai!\n\nPasien berikutnya akan dipanggil otomatis.');
        location.reload();
      }
    }

    // Auto refresh every 30 seconds for real-time updates
    let autoRefresh = setInterval(function() {
      console.log('Auto-refresh: Checking for updates...');
      // In production, fetch latest data from API
    }, 30000);
  </script>
</body>
</html>
